<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title>@PLTOD</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">
		<!-- Twitter Bootstrap Styles from http://twitter.github.com/bootstrap/assets/css  -->
		<link href="../css/bootstrap.css" rel="stylesheet">
		<link href="../css/bootstrap-responsive.css" rel="stylesheet">
		<link href="../css/docs.css" rel="stylesheet">
		<!-- Custom styles -->
		<link rel="stylesheet" href="../css/index.css">
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!-- Le fav and touch icons -->
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-144-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-114-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-72-precomposed.png">
		<link rel="apple-touch-icon-precomposed" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-57-precomposed.png">
		<link href='http://fonts.googleapis.com/css?family=Courgette' rel='stylesheet' type='text/css'>
	</head>
	<body>
		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a>
					<div class="nav-collapse collapse">
						<ul class="nav">
							<li><img id="icon" alt="me" class="img-circle" src="../img/me_verySmall.jpg">
							<li class="">
								<a href="../index.html"><i class="icon-home icon-white"></i> HOME</a>
							</li>
							<li class="">
								<a target="_blank" href="http://twitter.com/pltod"><i class="icon-user icon-white"></i> TWITTER</a>
							</li>
							<li class="">
								<a target="_blank" href="https://github.com/pltod"><i class="icon-file icon-white"></i> GITHUB</a>
							</li>
						</ul>
					</div>
					<div class="pull-right">
						<ul class="nav">
							<li>
								<a href="../blogMain.html"><i class="icon-zoom-in icon-white"></i> FOCUS: Building Applications with JavaSript Technology Stack</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="container">
			<div class="row">
				<div class="span8 offset1">
					<section id="post">
						<div class="page-header">
							<h2>Object Modeling with Mongoose</h2>
							<small>IN PROGRESS, 
								<a target="_blank" href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-count="horizontal">Tweet</a>
								<div class="g-plusone" data-size="medium" data-annotation="inline" data-width="300"></div>
							</small>							
						</div>
						<p class="well">
						When I develop full stack JavaScript applications I am using <a target="_blank" href="http://mongoosejs.com/"> Mongoose</a> to store data in <a target="_blank" href="http://www.mongodb.org/">mongoDB</a>. I find it very convenient. 
						Here is some stuff that might not be so obvious when using Mongoose for the first time (especially if you do not read documentation carefully). 
						</p>
						<h5 class="alert alert-info">1.	Mongoose theory in brief</h5>	
						<p >
							As stated in its documentation, Mongoose is "elegant mongodb object modeling for node.js".  
							In Mongoose we have the following terms:
							<dl class="well">
							<dt>Schema</dt>
							<dd>This is kind of DDL in terms of relational DBs. It says what kind of columns your table will have and what the type of each column is.</dd> 
							<dt>Model</dt>
							<dd>Corresponds to a table/collection and is created based on particular schema.</dd>
							<dt>Model Instance</dt>
							<dd>Corresponds to a record inside the table or more precisely a document part of collection in NoSQL terms.</dd>
							</dl>
						</p>		
						<h5 class="alert alert-info">2.	How Mongoose creates the names of your mongoDB collections?</h5>	
						<p>
							From documentation: "When no collection argument is passed, Mongoose produces a collection name by passing the model name..."
							<br/><br/>
							Model is created with: Mongoose#model(name, [schema], [collection], [skipInit])
							<br/><br/>
							For example: var User = mongoose.model('user', Schema);
						</p>
						<p class="well">
							That is great because I could have collection ‘user’ in my database without explicitly passing collection parameter. 
							Then I got the following use case. I've created one document and stored it inside the database. 
							Then I’ve tried to find it via Mongoose and there were no such document in the database. Why was that? 
							<br /> <br />
							Now I was more careful in reading the documentation till the end:
							<br /> <br />
							"…Mongoose produces a collection name by passing the model name to the utils.toCollectionName method. This method pluralizes the name. Collection names can also be declared through schema options."
							<br /> <br />
							So my 'problem' was that Mongoose created collection 'users' in my database instead of 'user' because of the pluralization feature. 
							Actually I was happy about this because in my TODO list I did have a task to change the model names from 'user' to 'users' in order to correspond to my REST style routes which were '/users' and '/users/:id'. 
							So thanks to Mongoose this TODO item disappeared.
							<br /> <br />
							<b>The amazing thing is that Mongoose does not pluralize already pluralized names, as well as deals with more complex cases like let’s say - 'repository' – which must become 'repositories'.</b> 
							See the tests in the gist bellow.
						</p>	
						<h5 class="alert alert-info">3.	Why Mongoose is designed this way?</h5>
						<h5 class="alert alert-info">4.	Mongoose and Connection Pooling</h5>
					</section>
					
				</div>			
			</div>
		</div>
		<footer>
			<span class="badge label label-info state offset1" rel="tooltip" data-original-title="1. Built with Twitter Bootstrap. <br>2. Hosted on Github. <br>3. Menu scroll on internal pages by http://imakewebthings.com/.<br>4. Presentations made with lab.hakim.se/reveal-js/.">Credits</span>
			<p>
				<b>Site States:</b>
				<span class="badge label label-success state" rel="tooltip" data-original-title="Site is still under constructon.">Under Constructon</span>
				<span class="badge label label-important state" rel="tooltip" data-original-title="Just a place for content storing.">+Content</span>
				<span class="badge label label-important state" rel="tooltip" data-original-title="Content will be searchable and taggable.">+Searchable</span>
				<span class="badge label label-important state" rel="tooltip" data-original-title="Comments and discussions will be activated.">+Collaborative</span>
				<span class="badge label label-important state" rel="tooltip" data-original-title="Users will be able to create content.">+Dynamic</span>
				<span class="badge label label-important state" rel="tooltip" data-original-title="The site will be turned into application with nice look and feel and intuitive user interface">+Application</span>
			</p>
		</footer>
		<!-- Le javascript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="../js/jquery.min.js"></script>
		<script src="../js/bootstrap.min.js"></script>
		<script src="../js/index.js"></script>
	</body>
</html>